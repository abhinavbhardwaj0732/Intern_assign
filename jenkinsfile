node {
def imagename = "node"
def registrycredentials = "admin"
def registry ="172.31.161.242:8082"
def dockerImage =""
stage('clone to Github repo') {
     git branch: 'main' , url:'https://github.com/abhinavbhardwaj0732/Intern_assign.git'
    }
stage('Building Image'){
dockerImage = docker.build(imagename)
}
 stage('Uploading to Nexus') {
     sh "docker login -u admin -p admin 127.0.0.1:8082"
 sh "docker tag ${imageName}:latest 127.0.0.1:8082/${imageName}:latest"
        sh "docker push 127.0.0.1:8082/${imageName}:latest"
       
}


}
